# Система для тестирования студентов

## Описание
Система предназначена для проведения тестирования студентов, на основе заданных тестовых задач

Студент, попадая в систему выбирает задачу, которую он хочет решить, и читает условие задачи.

Затем он пишет решение на одном из представленных ЯП

Послке отправки кода система выполняет этот код, и подает на вход тестовые наборы данных, для зачтения задания программа должна выдать правильный результат на всех наборах

## Как запустить:

### WebApp 
Представляет BackEnd системы, хранящий все необходимые сведения

1. Создать файл _./WebApp/appsettings.Secret.json_

2. Заполнить файл следующим содержанием

```json
{
    "JwtIssuerOptions": {
        "SecretKey":"Любая случайная строка, желатьельно длиной около 30-и символов"
    },
    "ConnectionStrings": {
        "PostgresDataBase": "Строка подключения к базе данных Postgres"
    }
}
```

Для поля ```ConnectionStrings:PostgresDataBase``` нужно использовать сроку подключения к реальной базе Postgres, например
> _User ID=postgres;Password=password;Server=127.0.0.1;Port=5432;Database=TestDBdotnet;Integrated Security=true;_ 


3. После настройки БД необходимо применить миграцию к существующей пустой БД, для этого необходимо в папке WebApp выполнить команду ```dotnet ef database update```. эта команда создаст необходимую базу данных, с необходимыми таблицами.

4. После этого можно запускать приложение, при помощи команды ```dotnet run INIT_ROLES=true```

### Client App

Представляет клиентсую часть на Angular

Необходимо установить:
1. Node.js + NPM

Запуск:

1. В папке _./ClientApp_ выполнить команду ```npm instal``` Эта команда установит все зависимости в папку __node_modules__.

3. В папке _./ClientApp/src/environments_ создать файл _environment.ts_ с следующим содержанием:

```json
export const environment = {
    production: true,
    isAdmin: false,
    baseUrl: '',
    buildNumber: '',
    showResults: true,
    recaptchaClientToken: ''
};
```
> baseUrl - url запущенного WebApp, при локальном запуске скорее всего будет ```http://localhost:64800```
 
> recaptchaClientToken - **ПУБЛИЧНЫЙ** токен, получаемый при создании reCAPCTCHA v2

2. Для запуска сайта необходимо выполнить комманду ```npm start```. После выполнения команды в браузере можно открыть сайт по адресу [localhost:4200](http://localhost:4200), где будет видно сам сайт.

### Executor

Программа, которая подключается к WebApp и выполняет присланные участниками задания, и выполняет проверку.

Необходимо чтобы на системе, где установлена данная программа был установлен **Docker**, так как именно с его помощью выполняется код участников.

1. Создать файл _./Executor/appsettings.Secret.json_

2. Заполнить файл следующим содержанием

```json
{
    "StartSettings": {
        "Address":"http://localhost:55471",
        "DockerEndPoint":"http://localhost:2375"
    },
    "UserInfo": {
        "UserName":"Имя пользователя, имеющего право Executor",
        "Password":"Пароль этого пользователя "
    }
}
```
> ```StartSettings:DockerEndPoint``` представляет url, указывающий на запущенный сервис **Docker**, при локальном запуске **Docker** слушает на порту *2375*

3. После создания такого файла можно выполнять команту ```dotnet run``` в папке _./Executor_